interface: '0.0.0.0'

ipv6: False

worker_threads: 8

gitfs_provider: pygit2

fileserver_backend:
  - git

gitfs_remotes:
  - git@github.com:magfest/salt-rules.git:
    - privkey: /etc/salt/pki/master/salt_git_key
    - pubkey: /etc/salt/pki/master/salt_git_key.pub
  - https://github.com/magfest/ipa-formula

ext_pillar:
  - git:
    - master git@github.com:magfest/salt-pillars.git:
      - privkey: /etc/salt/pki/master/salt_git_key
      - pubkey: /etc/salt/pki/master/salt_git_key.pub

file_ignore_regex:
  - '/\.git($|/)'

reactor:
  - 'salt/fileserver/gitfs/update':
    - /srv/reactor/update_fileserver.sls

rest_tornado:
    # can be any port
    port: 8000
    listen: 127.0.0.1
    debug: False
    disable_ssl: True
    websockets: True
    cors_origin: '*.magfe.st'

external_auth:
  pam:
    root:
      - .*
      - '@runner'
      - '@wheel'
    {% for admin in pillar.admins.default.keys() %}
    {{ admin }}:
      - .*
      - '@runner'
      - '@wheel'
    {% endfor %}
