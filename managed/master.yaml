interface: '0.0.0.0'

ipv6: False

worker_threads: 8

gitfs_provider: pygit2

fileserver_backend:
  - git

gitfs_remotes:
  - git@github.com:magfest/salt-rules.git:
    - privkey: /etc/salt/pki/master/salt_git_key
    - pubkey: /etc/salt/pki/master/salt_git_key.pub
  - https://github.com/magfest/ipa-formula

ext_pillar:
  - git:
    - master git@github.com:magfest/salt-pillars.git:
      - privkey: /etc/salt/pki/master/salt_git_key
      - pubkey: /etc/salt/pki/master/salt_git_key.pub

file_ignore_regex:
  - '/\.git($|/)'

reactor:
  - 'salt/fileserver/gitfs/update':
    - /srv/reactor/update_fileserver.sls

rest_cherypy:
  port: 8000
  listen: 127.0.0.1
  debug: False
  disable_ssl: True
  websockets: True

rest_cherrypy:
  port: 8000
  host: 127.0.0.1
  disable_ssl: True
  static: /srv/saltpad/static
  static_path: /static
  app: /srv/saltpad/index.html
  app_path: /saltpad

external_auth:
  pam:
    root:
      - .*
      - '@runner'
      - '@wheel'
    {% for admin in pillar.admins.default.keys() %}
    {{ admin }}:
      - .*
      - '@runner'
      - '@wheel'
    {% endfor %}
